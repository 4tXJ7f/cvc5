#!/bin/bash

echo "Make the LFSC regression script"
make regress | grep CALL: >& temp.txt

sed -i 's/\CALL:/run_regression_lfsc/g' temp.txt

echo "#!/bin/bash" > run_regressions_lfsc
cat temp.txt  >> run_regressions_lfsc
chmod 755 run_regressions_lfsc
rm temp.txt

echo "Run the LFSC regression script"
./run_regressions_lfsc >& lfsc-regression-results.txt

echo "================ CVC4+LFSC results"
echo -n "SUCCESS: "
cat lfsc-regression-results.txt | grep "SUCCESS" | wc -l
echo -n "WARNING: "
cat lfsc-regression-results.txt | grep "WARNING" | wc -l
echo -n "ERROR-LFSC: "
cat lfsc-regression-results.txt | grep "ERROR-LFSC" | wc -l
echo -n "ERROR-CVC4: "
cat lfsc-regression-results.txt | grep "ERROR-CVC4" | wc -l
echo "================"
